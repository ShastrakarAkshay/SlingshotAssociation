<section id="approval">
    <div class="row">
        <div class="col-sm-12">
            <h2><strong><i class="fa fa-gg-circle mr-2" aria-hidden="true"></i>Approval Requests <span
                        class="badge badge-primary">{{affiliatinRequests.length}}</span></strong></h2>
        </div>
    </div>
    <!-- <div class="row justify-content-end mt-5">
        <div class="col-sm-4 col-xs-12">
            <input type="text" class="form-control" placeholder="Search..." #searchKey
                (keyup)="filterResult(searchKey.value)">
        </div>
    </div> -->
    <div class="data-table mb-5 mt-3 table-responsive" style="border:1px solid #00000017;">
        <table mat-table [dataSource]="dataSource" matSort class="table-hover data-table" width="100%">

            <!-- Position Column -->
            <ng-container matColumnDef="index">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> # </th>
                <td mat-cell *matCellDef="let element; let i = index" width="10%"> {{i+1}} </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="districtName">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> Requested For </th>
                <td mat-cell *matCellDef="let element" width="25%" class="text-capitalize">
                    {{element.requestedDistrict.name}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="name">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> Name </th>
                <td mat-cell *matCellDef="let element" width="25%" class="empNameLink pointer text-capitalize">
                    {{element.members[0].firstName}} {{element.members[0].middleName}} {{element.members[0].lastName}}
                </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="mobile">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> Mobile </th>
                <td mat-cell *matCellDef="let element" width="20%" class="empNameLink pointer text-capitalize">
                    {{element.members[0].mobile}} </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="status">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> Status </th>
                <td mat-cell *matCellDef="let element" width="10%" class="text-capitalize text-info">
                    {{element.status}} </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="actions" class="pull-right">
                <th mat-header-cell *matHeaderCellDef class="bg-dark text-white">Action</th>
                <td mat-cell *matCellDef="let element" width="20%">
                    <div class="row p-2">
                        <a class="btn text-info pointer" (click)="getPersonInfo(element)" matTooltip="Edit"
                            matTooltipPosition="above"><i class="fa fa-pencil"></i></a>
                        <a class="btn text-danger pointer" (click)="deleteRequest(element.id)" matTooltip="Delete"
                            matTooltipPosition="above"><i class="fa fa-trash text-danger"></i></a>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index"></tr>
        </table>
        <mat-paginator [length]="100 " [pageSize]="5 " [pageSizeOptions]="[5, 10, 25, 50] " showFirstLastButtons>
        </mat-paginator>
    </div>

    <!-- TABLE SECTION 2 -->

    <div class="row">
        <div class="col-sm-12">
            <h2><strong><i class="fa fa-gg-circle mr-2" aria-hidden="true"></i>Affiliated Districts <span
                        class="badge badge-primary">{{approvedDistricts.length}}</span></strong></h2>
        </div>
    </div>
    <div class="data-table mb-5 mt-3 table-responsive" style="border:1px solid #00000017;">
        <table mat-table [dataSource]="dataSource2" matSort class="table-hover data-table" width="100%">

            <!-- Position Column -->
            <ng-container matColumnDef="index">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> # </th>
                <td mat-cell *matCellDef="let element; let i = index" width="10%"> {{i+1}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="districtName">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> District Name </th>
                <td mat-cell *matCellDef="let element" width="25%" class="empNameLink pointer text-capitalize">
                    {{element.requestedDistrict.name}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="member">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> Member Name </th>
                <td mat-cell *matCellDef="let element" width="30%" class="empNameLink pointer text-capitalize">
                    {{element.members[0].firstName}} {{element.members[0].middleName}} {{element.members[0].lastName}}
                </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="approvedOn">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> Approved On </th>
                <td mat-cell *matCellDef="let element" width="20%" class="text-capitalize">
                    {{element.approvedOn | date: 'dd'}}-{{element.approvedOn | date:'MMM'}}-{{element.approvedOn | date: 'yyyy'}}
                </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="status">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> Status </th>
                <td mat-cell *matCellDef="let element" width="15%" class="text-capitalize text-info">
                    {{element.status}} </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="actions" class="pull-right">
                <th mat-header-cell *matHeaderCellDef class="bg-dark text-white">Action</th>
                <td mat-cell *matCellDef="let element" width="10%">
                    <div class="row p-2">
                        <a class="btn text-info pointer" (click)="getRegisteredDistrctInfo(element)" matTooltip="View"
                            matTooltipPosition="above"><i class="fa fa-pencil"></i></a>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns2; let i = index"></tr>
        </table>
        <mat-paginator [length]="100 " [pageSize]="5 " [pageSizeOptions]="[5, 10, 25, 50] " showFirstLastButtons>
        </mat-paginator>
    </div>

    <!-- TABLE SECTION 3 -->

    <div class="row">
        <div class="col-sm-12">
            <h2><strong><i class="fa fa-gg-circle mr-2" aria-hidden="true"></i>Old Affiliations <span
                        class="badge badge-primary">{{oldAffiliations.length}}</span></strong></h2>
        </div>
    </div>
    <div class="data-table mb-5 mt-3 table-responsive" style="border:1px solid #00000017;">
        <table mat-table [dataSource]="dataSource3" matSort class="table-hover data-table" width="100%">

            <!-- Position Column -->
            <ng-container matColumnDef="index">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> # </th>
                <td mat-cell *matCellDef="let element; let i = index" width="10%"> {{i+1}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="districtName">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> District Name </th>
                <td mat-cell *matCellDef="let element" width="25%" class="empNameLink pointer text-capitalize">
                    {{element.requestedDistrict.name}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="member">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> Member Name </th>
                <td mat-cell *matCellDef="let element" width="30%" class="empNameLink pointer text-capitalize">
                    {{element.members[0].firstName}} {{element.members[0].middleName}} {{element.members[0].lastName}}
                </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="approvedOn">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> Approved On </th>
                <td mat-cell *matCellDef="let element" width="35%" class="text-capitalize">
                    {{element.approvedOn | date: 'dd'}}-{{element.approvedOn | date:'MMM'}}-{{element.approvedOn | date: 'yyyy'}}
                </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="status">
                <th mat-sort-header mat-header-cell *matHeaderCellDef class="bg-dark text-white"> Status </th>
                <td mat-cell *matCellDef="let element" width="35%" class="text-capitalize text-danger">
                    {{element.status}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns3"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns3; let i = index"></tr>
        </table>
        <mat-paginator [length]="100 " [pageSize]="5 " [pageSizeOptions]="[5, 10, 25, 50] " showFirstLastButtons>
        </mat-paginator>
    </div>

    <div *ngIf="showSpinner">
        <app-spinner></app-spinner>
    </div>

</section>